import{M as N,S as L,d as O}from"./bootstrap.esm-a1gjx-jx.js";import{a as _,h as T,b as l,d as e,e as E,w as j,t as n,F as m,i as x,k as y,j as h,f as v,r as q,o}from"./index-ZCbhgNXh.js";const R={class:"container"},z={class:"list-unstyled d-flex page-box mb-4"},G={class:"page-item"},H={class:"page-item"},J=v('<section class="bg-white-box mb-2"><form class="d-flex justify-content-between align-items-end"><div class="d-flex gap-2"><div class=""><label for="exampleFormControlInput1" class="form-label">頁面名稱</label><input type="text" class="form-control" id="exampleFormControlInput1" placeholder="頁面名稱"></div><div class=""><label for="country2" class="form-label">建立者</label><select class="form-select" id="country2" required=""><option value="">請選擇建立者</option><option>test user</option></select><div class="invalid-feedback">Please select a valid country.</div></div></div><div class="d-flex gap-2"><button type="submit" class="btn btn-outline-gray fw-semibold"> 清除 </button><button type="submit" class="btn btn-gray fw-semibold text-white"> 搜尋 </button></div></form></section>',1),K={class:"d-flex justify-content-between align-items-end mb-2"},Q=e("h4",{class:"fw-semibold"},"列表",-1),W={class:"d-flex gap-2 align-items-center me-2"},X={class:"mb-0 me-2"},Y={class:"bg-white-box h-100"},Z={class:"table-responsive"},A={class:"table table-hover"},ee=e("thead",{class:"table-head"},[e("tr",null,[e("th",{scope:"col"},"排序"),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"頁面名稱")]),e("th",{class:"table-img-col",scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"建立者")]),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"共用者")]),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"操作")])])],-1),se={key:0},te={scope:"row",class:"text-center"},ae={class:"ps-2 d-flex align-items-center"},le=["src"],oe={class:"mb-0"},ne={class:"ps-2"},ie=["src"],ce={class:"ps-2 d-flex align-items-center table-img-box"},de=["src"],re={class:"ps-2"},be=["onClick"],pe=["onClick"],_e={key:0},me=e("p",{style:{"text-align":"center","padding-bottom":"32vh"}},"尚無資料",-1),ue=[me],he={class:"modal fade",id:"pageEditModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"pageEditModalLabel","aria-hidden":"true"},ve={class:"modal-dialog modal-dialog-centered"},ge={class:"modal-content bg-white-box p-2"},fe=v('<div class="modal-header border-0"><div class="title-word"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">編輯「用電管理」頁面權限</h2></div><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>',1),we={class:"modal-body"},xe=v('<div class="bg-white-box bg-light p-3 mb-4"><p class="fs-5">新增使用者：</p><div class="d-flex gap-1"><div class=""><input type="text" class="form-control" id="userInput" placeholder="請輸入使用者名稱、帳號或Email"></div><div class=""><select class="form-select" aria-label="Default select example"><option selected>單位</option><option value="1">One</option></select></div><div class=""><select class="form-select" aria-label="Default select example"><option selected>職稱</option><option value="1">One</option></select></div><div class=""><p class="mb-0">篩選</p></div></div></div>',1),ye={class:"mb-3"},ke=e("p",{class:"fw-light"},"建立者：",-1),Ue={class:"d-flex"},Ce=["src","alt"],Me={class:"d-flex flex-column justify-content-between"},Pe={class:"fs-5 fw-light mb-0"},Ne={class:"fs-5 mb-0"},Ee={class:"mb-3"},je={class:"d-flex justify-content-between"},De=e("p",{class:"fw-light"},"具有權限的使用者：",-1),Be={class:"fs-5 fw-light"},Ve={key:0,class:"separator"},Fe={class:"d-flex justify-content-between"},Ie={class:"d-flex"},Se=["src"],$e={class:"d-flex flex-column justify-content-between"},Le={class:"fs-5 fw-light mb-0"},Oe={class:"fs-5 mb-0"},Te=e("div",{class:"col-3"},[e("select",{class:"form-select","aria-label":"Default select example"},[e("option",{value:"1"},"編輯者"),e("option",{value:"1"},"檢視者")])],-1),qe={class:"text-center"},Re={class:"modal fade",id:"delPageModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"delPageModalLabel","aria-hidden":"true"},ze={class:"modal-dialog modal-dialog-centered"},Ge={class:"modal-content bg-white-box"},He=v('<div class="modal-header border-0"><div class="title-word"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">刪除頁面</h2></div><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>',1),Je={class:"modal-body"},Ke={class:"fw-semibold"},Qe={class:"d-flex gap-2 justify-content-center"},We=e("button",{type:"submit",class:"fw-semibold btn btn-outline-black w-50","data-bs-dismiss":"modal"}," 取消 ",-1),es={__name:"PageMangerView",setup(Xe){const i=_(null),g=_(null),f=_(null),u=_(null),c=_(null),{userDatas:D}=O,B=t=>{f.value.show(),u.value={...t}};function V(t){i.value=i.value.filter((a,d)=>a.id!==t),u.value=null,f.value.hide(),L.fire({icon:"success",title:"已刪除",showConfirmButton:!1,timer:2e3})}const F=t=>{g.value.show(),c.value={...t}},I=()=>{g.value.hide()};(()=>{const t=[];D.forEach(a=>{a.pageAccess.forEach(d=>{const p=t.find(r=>r.pageName===d.page);if(p)p.shareUser.push({...a});else{const r={id:t.length+1,pageName:d.page,createUser:{...a},shareUser:[{...a}]};t.push(r)}})}),i.value=t})();const S=t=>{switch(t){case"首頁":return"/src/assets/image/icons/home.png";case"用電分析":return"/src/assets/image/icons/power.png";case"目標管理":return"/src/assets/image/icons/target.png";case"能源管理":return"/src/assets/image/icons/energy.png";case"人流監控":return"/src/assets/image/icons/people.png";default:return"/src/assets/image/icons/home.png"}};return T(()=>{g.value=new N("#pageEditModal",{keyboard:!1}),f.value=new N("#delPageModal",{keyboard:!1})}),(t,a)=>{var p,r,k,U,C,M,P;const d=q("router-link");return o(),l(m,null,[e("div",R,[e("ul",z,[e("li",G,[E(d,{to:"/access/accountManger",class:"page-link fs-4"},{default:j(()=>[h("帳號")]),_:1})]),e("li",H,[E(d,{to:"/access/pageManger",class:"page-link fs-4"},{default:j(()=>[h("頁面")]),_:1})])]),J,e("section",null,[e("div",K,[Q,e("div",W,[e("p",X,"共計："+n(i.value.length)+" 筆",1)])]),e("div",Y,[e("div",Z,[e("table",A,[ee,i.value.length>0?(o(),l("tbody",se,[(o(!0),l(m,null,x(i.value,(s,b)=>(o(),l("tr",{key:s.id},[e("th",te,n(b+1),1),e("td",null,[e("div",ae,[e("img",{class:"table-img-icon me-1",src:S(s.pageName),alt:""},null,8,le),e("p",oe,n(s.pageName),1)])]),e("td",null,[e("div",ne,[e("img",{class:"table-img-head",src:s.createUser.photo,alt:""},null,8,ie)])]),e("td",null,[e("div",ce,[(o(!0),l(m,null,x(s.shareUser,(w,$)=>(o(),l("img",{key:$,class:"table-img-head",src:w.photo,alt:""},null,8,de))),128))])]),e("td",null,[e("div",re,[e("button",{class:"btn btn-outline-primary border-0 fw-semibold",type:"button",onClick:w=>F(s)}," 編輯 ",8,be),e("button",{type:"button",class:"btn btn-outline-danger border-0 fw-semibold",onClick:w=>B(s)}," 刪除 ",8,pe)])])]))),128))])):y("",!0)]),i.value.length<=0?(o(),l("span",_e,ue)):y("",!0)])])])]),e("div",he,[e("div",ve,[e("div",ge,[fe,e("div",we,[xe,e("div",ye,[ke,e("div",Ue,[e("img",{class:"table-img-head me-2",src:(p=c.value)==null?void 0:p.createUser.photo,alt:(r=c.value)==null?void 0:r.createUser.name},null,8,Ce),e("div",Me,[e("p",Pe,n((k=c.value)==null?void 0:k.createUser.name),1),e("p",Ne,n((U=c.value)==null?void 0:U.createUser.phone),1)])])]),e("div",Ee,[e("div",je,[De,e("p",Be,"共計："+n((C=c.value)==null?void 0:C.shareUser.length)+" 位",1)]),(o(!0),l(m,null,x((M=c.value)==null?void 0:M.shareUser,(s,b)=>(o(),l(m,{key:s.id},[b!=0?(o(),l("div",Ve)):y("",!0),e("div",Fe,[e("div",Ie,[e("img",{class:"table-img-head me-2",src:s.photo,alt:""},null,8,Se),e("div",$e,[e("p",Le,n(s.name),1),e("p",Oe,n(s.phone),1)])]),Te])],64))),128))]),e("div",qe,[e("button",{type:"button",class:"btn btn-primary w-50",onClick:a[0]||(a[0]=s=>I())}," 完成 ")])])])])]),e("div",Re,[e("div",ze,[e("div",Ge,[He,e("div",Je,[e("p",null,[h(" 確定要刪除 "),e("span",Ke,n((P=u.value)==null?void 0:P.pageName),1),h(" 與頁面內容嗎？ ")]),e("div",Qe,[e("button",{type:"submit",class:"fw-semibold btn btn-danger w-50",onClick:a[1]||(a[1]=s=>{var b;return V((b=u.value)==null?void 0:b.id)})}," 確定刪除 "),We])])])])])],64)}}};export{es as default};
