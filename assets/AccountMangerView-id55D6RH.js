import{c as L,O as G,d as W,M as R,_ as ae}from"./ItemNav-KjmjetCZ.js";import{a as p,b as D,r as E,o as n,d as c,e,f as l,w as F,g as ee,h as le,t as i,n as P,i as H,j as se,F as w,k as I,u as _,l as J,m as K}from"./index-K0WYNi0E.js";import{_ as te}from"./tick-UXBKKqVC.js";const oe="data:image/png;base64,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",ne={class:"offcanvas offcanvas-end account-offcanvas",tabindex:"-1","data-bs-backdrop":"static",id:"setPasswordCanvas","aria-labelledby":"accountEditOffcanvasLabel"},ce=ee('<div class="offcanvas-header justify-content-end"><button type="button" class="btn-close rounded-5 bg-gray" data-bs-dismiss="offcanvas" aria-label="Close"></button></div><div class="title-word mt-1"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">設定密碼</h2></div>',2),de={class:"offcanvas-body"},ie=e("div",null,null,-1),re={class:"row g-3"},ue={class:"col-8"},me=e("label",{for:"password",class:"form-label"},"密碼：",-1),be={class:"col-8"},pe=e("label",{for:"password-chcek",class:"form-label"},"確認密碼：",-1),ve={class:"mt-5 text-center d-flex gap-2"},fe=["disabled"],_e={__name:"AccountSetPassword",props:["userObject","setPasswordElement","accountEditElement"],setup(A){const{swalSuccess:S}=L.setup(),C=p(null),r=A,$=D(r.userObject);function h(){C.value.resetForm(),r.setPasswordElement.hide(),r.accountEditElement.hide(),S("已建立")}return(u,m)=>{const y=E("VField"),k=E("ErrorMessage"),q=E("VForm");return n(),c("div",ne,[ce,e("div",de,[ie,l(q,{ref_key:"setPasswordForm",ref:C,class:"needs-validation h-100 d-flex flex-column justify-content-between",novalidate:""},{default:F(({meta:V})=>[e("div",re,[e("div",ue,[me,l(y,{class:"form-control",id:"password",name:"password",type:"password",rules:"required",placeholder:"請輸入密碼"}),l(k,{as:"p",class:"invalid-feedback d-block mb-0",name:"password"})]),e("div",be,[pe,l(y,{class:"form-control",id:"password-chcek",name:"password-chcek",type:"password",rules:"confirmed:@password",placeholder:"請再次輸入密碼",modelValue:$.password,"onUpdate:modelValue":m[0]||(m[0]=t=>$.password=t)},null,8,["modelValue"]),l(k,{as:"p",class:"invalid-feedback d-block mb-0",name:"password-chcek"})])]),e("div",ve,[e("button",{class:"btn btn-outline-gray text-black w-50",type:"button",onClick:m[1]||(m[1]=t=>h())}," 上一步 "),e("button",{class:"btn btn-primary w-50",disabled:!V.valid,type:"button",onClick:m[2]||(m[2]=t=>h(u.value))}," 完成 ",8,fe)])]),_:1},512)])])}}},he={class:"modal fade",id:"addModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ye={class:"modal-dialog modal-dialog-centered"},ge={class:"modal-content bg-white-box"},ke={class:"modal-header border-0"},we={class:"title-word"},Ae=e("span",{class:"colr-block"},null,-1),Ve={class:"mb-0 fw-semibold"},Ee=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),xe={class:"modal-body"},Ue={class:"mb-3"},Ce={for:"inputField",class:"form-label"},$e={class:"text-center"},Ie=["disabled"],Fe={__name:"AddModal",props:["tempArray","arrayName"],emits:["dataAdjusted"],setup(A,{emit:S}){const{swalSuccess:C}=L.setup(),r=A,$=S,h=p(null),u=p(null),m=p(null),y=p(null);function k(V){switch(V){case"title":u.value="職稱",m.value="請輸入職稱";break;default:u.value="單位",m.value="請輸入單位名稱";break}}function q(){const V=r.tempArray.findIndex(b=>b===h.value),t=[...r.tempArray];V===-1?C("建立失敗"):(C("已建立"),t.push(h.value)),$("dataAdjusted",{arrayName:r.arrayName,adjustedArray:t}),y.value.resetForm()}return le(()=>{k(r.arrayName)}),(V,t)=>{const b=E("VField"),Q=E("ErrorMessage"),N=E("VForm");return n(),c("div",he,[e("div",ye,[e("div",ge,[e("div",ke,[e("div",we,[Ae,e("h2",Ve,"建立新"+i(u.value),1)]),Ee]),e("div",xe,[l(N,{ref_key:"addForm",ref:y,onSubmit:q},{default:F(()=>[e("div",Ue,[e("label",Ce,i(u.value)+"：",1),l(b,{class:"form-control",id:"inputField",name:"data",type:"test",rules:"required",modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=O=>h.value=O),placeholder:`${m.value}`},null,8,["modelValue","placeholder"]),l(Q,{as:"p",class:"invalid-feedback d-block mb-0",name:"data"})]),e("div",$e,[e("button",{type:"submit",class:P(["fw-semibold btn",[h.value?"btn-primary":"btn-gray"]]),disabled:!h.value}," 儲存 ",10,Ie)])]),_:1},512)])])])])}}},qe={class:"offcanvas offcanvas-end account-offcanvas","data-bs-backdrop":"static",tabindex:"-1",id:"accountEditOffcanvas","aria-labelledby":"staticBackdropLabel"},Me={class:"offcanvas-header"},Se={class:"offcanvas-title fw-semibold",id:"staticBackdropLabel"},je={class:"title-word mt-1"},Pe=e("span",{class:"colr-block"},null,-1),Qe={key:0},Ne={key:1},Oe={class:"offcanvas-body"},Be=e("div",null,[e("img",{src:oe,alt:"uploadPhoto"})],-1),ze={class:"row g-3"},Ye={class:"col-8"},Le=e("label",{for:"account",class:"form-label"},"帳號：",-1),Xe={class:"col-8"},Ze=e("label",{for:"name",class:"form-label"},"姓名：",-1),Te={class:"col-8"},Ke=e("label",{for:"tel",class:"form-label"},"電話：",-1),We={class:"col-12 d-flex select-lable-aligin gap-2"},De={class:"col-8"},Re=e("label",{for:"department",class:"form-label"},"單位：",-1),He=e("option",{value:"",disabled:""},"請選擇單位",-1),Je=["value"],Ge={class:"col-4"},es={class:"col-12 d-flex select-lable-aligin gap-2"},ss={class:"col-8"},ts=e("label",{for:"title",class:"form-label"},"職稱：",-1),as=e("option",{value:"",disabled:""},"請選擇職稱",-1),ls=["value"],os={class:"col-4"},ns={class:"col-8"},cs=e("label",{for:"system-access",class:"form-label"},"系統權限：",-1),ds=e("option",{value:"",disabled:""},"請選擇權限",-1),is=["value"],rs=e("hr",{class:"my-4"},null,-1),us=e("h3",null,"頁面權限",-1),ms={class:"col-8"},bs=e("option",{value:"",disabled:""},"請選擇頁面",-1),ps=["value"],vs={class:"col-4"},fs={class:"dropdown-menu access-box"},_s=["onClick"],hs={class:"d-flex"},ys=e("img",{src:te,alt:"tick"},null,-1),gs=["onClick"],ks={class:"col-4"},ws=["disabled"],As={class:"mt-5 text-center"},Vs={key:0},Es=["disabled"],xs={key:1},Us=["disabled"],Cs={__name:"AccountEditOffcanvas",props:["departments","titles","systemAccesss","addModalElement","accountEditElement","isNew","tempObject"],emits:["updateUserObject"],setup(A,{emit:S}){const{swalSuccess:C}=L.setup(),r=A,$=S,h=p(null),u=p(null),m=p(r.departments),y=p(r.titles),k=p(null),q=W.webPages,V=W.pageAccesss,t=D({id:"",account:"",name:"",phone:"",department:"",title:"",systemAccess:"",pageAccess:[{page:"",access:""}]});let b=D([{page:"",access:""}]);H(()=>r.tempObject,d=>{d!==null&&(Object.assign(t,d),b=d.pageAccess)},{immediate:!0}),H(()=>r.isNew,d=>{d&&k.value.resetForm()});function Q(){b.push({page:"",access:""})}function N(){console.log(t),$("updateUserObject",t),k.value.resetForm(),M.value.show()}function O(){$("updateUserObject",t),C("已儲存"),r.accountEditElement.hide()}function z(d){C("已移除")}function X(d,o){const a=t.pageAccess.findIndex(g=>g.page===d.page);t.pageAccess[a].access=o}function Y(d){r.addModalElement.show(),d==="title"?(u.value="title",h.value=[...y.value]):(u.value="department",h.value=[...m.value])}function Z(){r.accountEditElement.hide()}function v(d){switch(d){case"Admin":return"系統管理員";case"editable":return"可編輯";case"onlyView":return"僅檢視";case"deactivate":return"停用中";default:return d}}function f(d){switch(d){case"editable":return"編輯者";case"onlyView":return"檢視者";case"del":return"移除權限";default:return d}}function x(d){const{arrayName:o,adjustedArray:a}=d;switch(o){case"title":y.value=a;break;case"department":m.value=a;break;default:console.error(d);break}r.addModalElement.hide()}const M=p(null);return se(()=>{M.value=new G(document.querySelector("#setPasswordCanvas"),{keyboard:!1})}),(d,o)=>{const a=E("VField"),g=E("ErrorMessage"),B=E("VForm");return n(),c(w,null,[e("div",qe,[e("div",Me,[e("h2",Se,[e("div",je,[Pe,A.isNew?(n(),c("span",Qe,"建立新帳號")):(n(),c("span",Ne,"編輯帳號"))])]),e("button",{type:"button",class:"btn-close rounded-5 bg-gray","aria-label":"Close",onClick:o[0]||(o[0]=j=>Z())})]),e("div",Oe,[Be,l(B,{ref_key:"editUserForm",ref:k,class:"needs-validation"},{default:F(({meta:j})=>[e("div",ze,[e("div",Ye,[Le,l(a,{class:"form-control",id:"account",name:"account",type:"text",rules:"required",required:"",placeholder:"請輸入帳號",modelValue:t.account,"onUpdate:modelValue":o[1]||(o[1]=s=>t.account=s),disabled:!A.isNew},null,8,["modelValue","disabled"]),l(g,{as:"p",class:"invalid-feedback d-block mb-0",name:"account"})]),e("div",Xe,[Ze,l(a,{class:"form-control",id:"name",name:"name",type:"text",rules:"required",required:"",placeholder:"請輸入姓名",modelValue:t.name,"onUpdate:modelValue":o[2]||(o[2]=s=>t.name=s)},null,8,["modelValue"]),l(g,{as:"p",class:"invalid-feedback d-block mb-0",name:"name"})]),e("div",Te,[Ke,l(a,{class:"form-control",id:"tel",name:"phone",type:"tel",required:"",rules:"required|digits:10|numeric",placeholder:"請輸入電話",modelValue:t.phone,"onUpdate:modelValue":o[3]||(o[3]=s=>t.phone=s),disabled:!A.isNew},null,8,["modelValue","disabled"]),l(g,{as:"p",class:"invalid-feedback d-block mb-0",name:"phone"})]),e("div",We,[e("div",De,[Re,l(a,{id:"department",name:"department",as:"select",class:"form-select",required:"",rules:"required",modelValue:t.department,"onUpdate:modelValue":o[4]||(o[4]=s=>t.department=s)},{default:F(()=>[He,(n(!0),c(w,null,I(m.value,s=>(n(),c("option",{key:s,value:s},i(s),9,Je))),128))]),_:1},8,["modelValue"]),l(g,{as:"p",class:"invalid-feedback d-block mb-0",name:"department"})]),e("div",Ge,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:o[5]||(o[5]=s=>Y("department"))}," 建立新單位 ")])]),e("div",es,[e("div",ss,[ts,l(a,{id:"title",name:"title",as:"select",class:"form-select",required:"",rules:"required",modelValue:t.title,"onUpdate:modelValue":o[6]||(o[6]=s=>t.title=s)},{default:F(()=>[as,(n(!0),c(w,null,I(y.value,s=>(n(),c("option",{key:s,value:s},i(s),9,ls))),128))]),_:1},8,["modelValue"]),l(g,{as:"p",class:"invalid-feedback d-block mb-0",name:"title"})]),e("div",os,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:o[7]||(o[7]=s=>Y("title"))}," 建立新職稱 ")])]),e("div",ns,[cs,l(a,{id:"system-access",name:"system-access",as:"select",class:P(["form-select",[t.systemAccess!==""?"select-unslect":""]]),required:"",rules:"required",modelValue:t.systemAccess,"onUpdate:modelValue":o[8]||(o[8]=s=>t.systemAccess=s)},{default:F(()=>[ds,(n(!0),c(w,null,I(A.systemAccesss,s=>(n(),c("option",{key:s,value:s},i(v(s)),9,is))),128))]),_:1},8,["modelValue","class"]),l(g,{as:"p",class:"invalid-feedback d-block mb-0",name:"system-access"})])]),rs,us,(n(!0),c(w,null,I(_(b),(s,T)=>(n(),c("div",{key:s.key,class:"col-12 d-flex align-items-start gap-2 mb-3"},[e("div",ms,[l(a,{id:`page-${T}`,name:`page-${T}`,as:"select",class:"form-select",required:"",rules:"required",modelValue:s.page,"onUpdate:modelValue":U=>s.page=U,disabled:s.page!==""},{default:F(()=>[bs,(n(!0),c(w,null,I(_(q),U=>(n(),c("option",{key:U,value:U},i(U),9,ps))),128))]),_:2},1032,["id","name","modelValue","onUpdate:modelValue","disabled"]),l(g,{as:"p",class:"invalid-feedback d-block mb-0",name:`page-${T}`},null,8,["name"])]),e("div",vs,[e("button",{type:"button",class:P(["btn btn-outline-gray dropdown-toggle",[s.access!==""?"text-black":""]]),"data-bs-toggle":"dropdown","aria-expanded":"false"},i(s.access!==""?f(s.access):"請選擇權限"),3),e("ul",fs,[(n(!0),c(w,null,I(_(V),U=>(n(),c("li",{key:U,class:"d-flex"},[e("img",{src:te,class:P([U===s.access?"visible":""]),alt:"tick"},null,2),e("a",{class:"dropdown-item",href:"#",onClick:J(mt=>X(s,U),["prevent"])},i(f(U)),9,_s)]))),128)),e("li",hs,[ys,e("a",{class:"dropdown-item text-danger border-0",href:"#",onClick:J(U=>z(s),["prevent"])},"移除權限",8,gs)])])])]))),128)),e("div",ks,[e("button",{type:"button",class:P(["btn",{"btn-outline-gray":_(b)&&_(b)[_(b).length-1].page==="","btn-outline-primary":!(_(b)&&_(b)[_(b).length-1].page==="")}]),onClick:Q,disabled:_(b)&&_(b)[_(b).length-1].page===""}," 新增頁面 ",10,ws)]),e("div",As,[A.isNew?(n(),c("span",Vs,[e("button",{class:P(["btn btn-primary w-50",[j.valid?"btn-primary":"btn-gray"]]),disabled:!j.valid,type:"button",onClick:o[9]||(o[9]=s=>N())}," 下一步 ",10,Es)])):(n(),c("span",xs,[e("button",{class:P(["btn btn-primary w-50",[j.valid?"btn-primary":"btn-gray"]]),disabled:!j.valid,type:"button",onClick:o[10]||(o[10]=s=>O())}," 儲存 ",10,Us)]))])]),_:1},512)])]),l(Fe,{"temp-array":h.value,"array-name":u.value,onDataAdjusted:x},null,8,["temp-array","array-name"]),l(_e,{"user-object":t,"set-password-element":M.value,"account-edit-element":A.accountEditElement},null,8,["user-object","set-password-element","account-edit-element"])],64)}}},$s={class:"container"},Is={class:"bg-white-box mb-2"},Fs={class:"d-flex gap-2"},qs={class:""},Ms=e("label",{for:"searchInput",class:"form-label"},"姓名、電話、帳號",-1),Ss={class:""},js=e("label",{for:"search-department",class:"form-label"},"單位",-1),Ps=e("option",{value:"",disabled:""},"請選擇單位",-1),Qs=["value"],Ns={class:""},Os=e("label",{for:"search-title",class:"form-label"},"職稱",-1),Bs=e("option",{value:"",disabled:""},"請選擇職稱",-1),zs=["value"],Ys=e("button",{type:"submit",class:"btn btn-gray fw-semibold"},"搜尋",-1),Ls={class:"d-flex justify-content-between align-items-end mb-2"},Xs=e("h4",{class:"fw-semibold"},"列表",-1),Zs={class:"d-flex gap-2 align-items-center me-2"},Ts={class:"mb-0 me-2"},Ks={class:"bg-white-box"},Ws={class:"table-responsive"},Ds={class:"table table-hover"},Rs=e("thead",{class:"table-head"},[e("tr",null,[e("th",{scope:"col"},"排序"),e("th",{class:"table-img-col",scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"頭像")]),e("th",{scope:"col"},"單位"),e("th",{scope:"col"},"單位"),e("th",{scope:"col"},"姓名"),e("th",{scope:"col"},"電話"),e("th",{scope:"col"},"帳號"),e("th",{scope:"col"},"系統權限"),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"權限頁面")]),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"操作")])])],-1),Hs={scope:"row",class:"text-center"},Js={class:"ps-2"},Gs=["src"],et={class:"ps-2 mb-0"},st={class:"ps-2"},tt=["onClick"],at=["onClick"],lt={class:"modal fade",id:"delUserModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ot={class:"modal-dialog modal-dialog-centered"},nt={class:"modal-content bg-white-box"},ct=ee('<div class="modal-header border-0"><div class="title-word"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">刪除帳號</h2></div><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>',1),dt={class:"modal-body"},it={class:"fw-semibold"},rt={class:"d-flex gap-2 justify-content-center"},ut=e("button",{type:"submit",class:"fw-semibold btn btn-outline-black w-50","data-bs-dismiss":"modal"}," 取消 ",-1),ft={__name:"AccountMangerView",setup(A){const{swalSuccess:S}=L.setup(),{userDatas:C,departments:r,titles:$,systemAccesss:h}=W,u=p(C),m=p(null),y=p(null),k=p(null),q=p(null),V=p(null),t=p(null),b=p(null);function Q(v){console.log(v)}function N(){b.value.resetForm()}function O(v){switch(v){case"Admin":return"系統管理員";case"editable":return"可編輯";case"onlyView":return"僅檢視";case"deactivate":return"停用中";default:return v}}function z(v,f){f==="new"?(y.value=!0,k.value={account:"",name:"",phone:"",department:"",title:"",systemAccess:"",pageAccess:[{page:"",access:""}]}):(y.value=!1,k.value={...v}),V.value.show()}function X(v){if(y.value){const f=u.value[u.value.length-1],x=f?parseInt(f.id,10):0,M=isNaN(x)?1:x+1;v.id=M,u.value.push(v)}else{const f=u.value.findIndex(x=>x.id===v.id);f!==-1&&(u.value[f]=v)}}function Y(v){t.value.show(),m.value={...v}}function Z(v){u.value=u.value.filter((f,x)=>f.id!==v),m.value=null,t.value.hide(),S("已刪除")}return se(()=>{V.value=new G("#accountEditOffcanvas",{keyboard:!1}),q.value=new R(document.querySelector("#addModal"),{keyboard:!1}),t.value=new R(document.querySelector("#delUserModal"),{keyboard:!1})}),(v,f)=>{var o;const x=E("VField"),M=E("ErrorMessage"),d=E("VForm");return n(),c(w,null,[e("div",$s,[l(ae,{"nav-where":"access"}),e("section",Is,[l(d,{class:"d-flex justify-content-between align-items-end",ref_key:"searchForm",ref:b,onSubmit:Q},{default:F(()=>[e("div",Fs,[e("div",qs,[Ms,l(x,{class:"form-control",name:"searchInput",type:"text",id:"searchInput",placeholder:"請輸入姓名、電話、帳號"})]),e("div",Ss,[js,l(x,{id:"search-department",name:"department",as:"select",class:"form-select",required:""},{default:F(()=>[Ps,(n(!0),c(w,null,I(_(r),a=>(n(),c("option",{key:a,value:a},i(a),9,Qs))),128))]),_:1}),l(M,{as:"p",class:"invalid-feedback d-block mb-0",name:"department"})]),e("div",Ns,[Os,l(x,{id:"search-title",name:"title",as:"select",class:"form-select",required:""},{default:F(()=>[Bs,(n(!0),c(w,null,I(_($),a=>(n(),c("option",{key:a,value:a},i(a),9,zs))),128))]),_:1}),l(M,{as:"p",class:"invalid-feedback d-block mb-0",name:"title"})])]),e("div",{class:"d-flex gap-2"},[e("button",{type:"button",class:"btn btn-outline-gray fw-semibold",onClick:N}," 清除 "),Ys])]),_:1},512)]),e("section",null,[e("div",Ls,[Xs,e("div",Zs,[e("p",Ts,"共計："+i(u.value.length)+" 筆",1),e("button",{class:"btn btn-outline-primary fw-semibold",type:"button","aria-controls":"staticBackdrop",onClick:f[0]||(f[0]=a=>z(k.value,"new"))}," 建立新帳號 ")])]),e("div",Ks,[e("div",Ws,[e("table",Ds,[Rs,(n(!0),c(w,null,I(u.value,(a,g)=>(n(),c("tbody",{key:a.id},[e("tr",null,[e("th",Hs,i(g+1),1),e("td",null,[e("div",Js,[e("img",{class:"table-img-head",src:a.photo,alt:""},null,8,Gs)])]),e("td",null,i(a.department),1),e("td",null,i(a.title),1),e("td",null,i(a.name),1),e("td",null,i(a.phone),1),e("td",null,i(a.account),1),e("td",null,i(O(a.systemAccess)),1),e("td",null,[e("p",et,[(n(!0),c(w,null,I(a.pageAccess,(B,j)=>(n(),c(w,null,[K(i(j>0?"、":"")+i(B.page),1)],64))),256))])]),e("td",null,[e("div",st,[e("button",{type:"button",class:"btn btn-outline-primary border-0 fw-semibold","aria-controls":"staticBackdrop",onClick:B=>z(a,"edit")}," 編輯 ",8,tt),e("button",{type:"button",class:"btn btn-outline-danger border-0 fw-semibold",onClick:B=>Y(a)}," 刪除 ",8,at)])])])]))),128))])])])])]),e("div",lt,[e("div",ot,[e("div",nt,[ct,e("div",dt,[e("p",null,[K(" 確定要刪除 "),e("span",it,i((o=m.value)==null?void 0:o.name),1),K(" 的帳號嗎？ ")]),e("div",rt,[e("button",{type:"submit",class:"fw-semibold btn btn-danger w-50",onClick:f[1]||(f[1]=a=>{var g;return Z((g=m.value)==null?void 0:g.id)})}," 確定刪除 "),ut])])])])]),l(Cs,{titles:_($),departments:_(r),"system-accesss":_(h),"is-new":y.value,"temp-object":k.value,"add-modal-element":q.value,"account-edit-element":V.value,onUpdateUserObject:X},null,8,["titles","departments","system-accesss","is-new","temp-object","add-modal-element","account-edit-element"])],64)}}};export{ft as default};
