import{O as J,d as K,M as R}from"./bootstrap.esm-Rs7Aj1ey.js";import{a as h,b as W,r as x,o as n,d as c,e,f as o,w as A,g as G,h as D,i as ee,F as g,j as C,t as i,u as m,n as S,k as H,l as j}from"./index-ystOkTZM.js";import{_ as se}from"./tick-UXBKKqVC.js";import{S as z}from"./sweetalert2.all-6XfT6ZgS.js";import{_ as te}from"./AddModal-kV7wHnYN.js";const oe="data:image/png;base64,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",le={class:"offcanvas offcanvas-end account-offcanvas",tabindex:"-1","data-bs-backdrop":"static",id:"setPasswordCanvas","aria-labelledby":"accountEditOffcanvasLabel"},ae=G('<div class="offcanvas-header justify-content-end"><button type="button" class="btn-close rounded-5 bg-gray" data-bs-dismiss="offcanvas" aria-label="Close"></button></div><div class="title-word mt-1"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">設定密碼</h2></div>',2),ne={class:"offcanvas-body"},ce=e("div",null,null,-1),de={class:"row g-3"},ie={class:"col-8"},re=e("label",{for:"password",class:"form-label"},"密碼：",-1),ue={class:"col-8"},me=e("label",{for:"password-chcek",class:"form-label"},"確認密碼：",-1),be={class:"mt-5 text-center d-flex gap-2"},pe=["disabled"],fe={__name:"AccountSetPassword",props:["userObject","setPasswordElement","accountEditElement"],setup(V){const B=h(null),b=V,q=W(b.userObject);function M(){B.value.resetForm(),b.setPasswordElement.hide(),b.accountEditElement.hide(),z.fire({icon:"success",title:"已建立",position:"center",showConfirmButton:!1,timer:2e3})}return(p,f)=>{const y=x("VField"),k=x("ErrorMessage"),P=x("VForm");return n(),c("div",le,[ae,e("div",ne,[ce,o(P,{ref_key:"setPasswordForm",ref:B,class:"needs-validation h-100 d-flex flex-column justify-content-between",novalidate:""},{default:A(({meta:$})=>[e("div",de,[e("div",ie,[re,o(y,{class:"form-control",id:"password",name:"password",type:"password",rules:"required",placeholder:"請輸入密碼"}),o(k,{as:"p",class:"invalid-feedback d-block mb-0",name:"password"})]),e("div",ue,[me,o(y,{class:"form-control",id:"password-chcek",name:"password-chcek",type:"password",rules:"confirmed:@password",placeholder:"請再次輸入密碼",modelValue:q.password,"onUpdate:modelValue":f[0]||(f[0]=a=>q.password=a)},null,8,["modelValue"]),o(k,{as:"p",class:"invalid-feedback d-block mb-0",name:"password-chcek"})])]),e("div",be,[e("button",{class:"btn btn-outline-gray text-black w-50",type:"button",onClick:f[1]||(f[1]=a=>M())}," 上一步 "),e("button",{class:"btn btn-primary w-50",disabled:!$.valid,type:"button",onClick:f[2]||(f[2]=a=>M(p.value))}," 完成 ",8,pe)])]),_:1},512)])])}}},ve={class:"offcanvas offcanvas-end account-offcanvas","data-bs-backdrop":"static",tabindex:"-1",id:"accountEditOffcanvas","aria-labelledby":"staticBackdropLabel"},_e={class:"offcanvas-header"},he={class:"offcanvas-title fw-semibold",id:"staticBackdropLabel"},ge={class:"title-word mt-1"},ye=e("span",{class:"colr-block"},null,-1),ke={key:0},we={key:1},Ae={class:"offcanvas-body"},Ve=e("div",null,[e("img",{src:oe,alt:"uploadPhoto"})],-1),Ee={class:"row g-3"},Ce={class:"col-8"},xe=e("label",{for:"account",class:"form-label"},"帳號：",-1),Ue={class:"col-8"},Ie=e("label",{for:"name",class:"form-label"},"姓名：",-1),qe={class:"col-8"},Me=e("label",{for:"tel",class:"form-label"},"電話：",-1),$e={class:"col-12 d-flex select-lable-aligin gap-2"},Be={class:"col-8"},Pe=e("label",{for:"department",class:"form-label"},"單位：",-1),Qe=e("option",{value:"",disabled:""},"請選擇單位",-1),Se=["value"],je={class:"col-4"},Fe={class:"col-12 d-flex select-lable-aligin gap-2"},Oe={class:"col-8"},ze=e("label",{for:"title",class:"form-label"},"職稱：",-1),Ne=e("option",{value:"",disabled:""},"請選擇職稱",-1),Ye=["value"],Le={class:"col-4"},Xe={class:"col-8"},Ze=e("label",{for:"system-access",class:"form-label"},"系統權限：",-1),Te=e("option",{value:"",disabled:""},"請選擇權限",-1),Ke=["value"],We=e("hr",{class:"my-4"},null,-1),Re=e("h3",null,"頁面權限",-1),De={class:"col-8"},He=e("option",{value:"",disabled:""},"請選擇頁面",-1),Je=["value"],Ge={class:"col-4"},es={class:"dropdown-menu access-box"},ss=["onClick"],ts={class:"d-flex"},os=e("img",{src:se,alt:"tick"},null,-1),ls=["onClick"],as={class:"col-4"},ns=["disabled"],cs={class:"mt-5 text-center"},ds={key:0},is=["disabled"],rs={key:1},us=["disabled"],ms={__name:"AccountEditOffcanvas",props:["departments","titles","systemAccesss","addModalElement","accountEditElement","isNew","tempObject"],emits:["updateUserObject"],setup(V,{emit:B}){const b=V,q=B,M=h(null),p=h(null),f=h(b.departments),y=h(b.titles),k=h(null),P=K.webPages,$=K.pageAccesss,a=W({id:"",account:"",name:"",phone:"",department:"",title:"",systemAccess:"",pageAccess:[{page:"",access:""}]});let v=W([{page:"",access:""}]);D(()=>b.tempObject,d=>{d!==null&&(Object.assign(a,d),v=d.pageAccess)},{immediate:!0}),D(()=>b.isNew,d=>{d&&k.value.resetForm()});function N(){v.push({page:"",access:""})}function Y(){console.log(a),q("updateUserObject",a),k.value.resetForm(),U.value.show()}function L(){q("updateUserObject",a),z.fire({icon:"success",title:"已儲存",position:"top",showConfirmButton:!1,timer:2e3}),b.accountEditElement.hide()}function F(d){z.fire({icon:"success",title:"已移除",position:"top",showConfirmButton:!1,timer:2e3})}function X(d,l){const _=a.pageAccess.findIndex(t=>t.page===d.page);a.pageAccess[_].access=l}function O(d){b.addModalElement.show(),d==="title"?(p.value="title",M.value=[...y.value]):(p.value="department",M.value=[...f.value])}function Z(){b.accountEditElement.hide()}function r(d){switch(d){case"Admin":return"系統管理員";case"editable":return"可編輯";case"onlyView":return"僅檢視";case"deactivate":return"停用中";default:return d}}function u(d){switch(d){case"editable":return"編輯者";case"onlyView":return"檢視者";case"del":return"移除權限";default:return d}}function E(d){const{arrayName:l,adjustedArray:_}=d;switch(l){case"title":y.value=_;break;case"department":f.value=_;break;default:console.error(d);break}b.addModalElement.hide()}const U=h(null);return ee(()=>{U.value=new J(document.querySelector("#setPasswordCanvas"),{keyboard:!1})}),(d,l)=>{const _=x("VField"),t=x("ErrorMessage"),Q=x("VForm");return n(),c(g,null,[e("div",ve,[e("div",_e,[e("h2",he,[e("div",ge,[ye,V.isNew?(n(),c("span",ke,"建立新帳號")):(n(),c("span",we,"編輯帳號"))])]),e("button",{type:"button",class:"btn-close rounded-5 bg-gray","aria-label":"Close",onClick:l[0]||(l[0]=I=>Z())})]),e("div",Ae,[Ve,o(Q,{ref_key:"editUserForm",ref:k,class:"needs-validation"},{default:A(({meta:I})=>[e("div",Ee,[e("div",Ce,[xe,o(_,{class:"form-control",id:"account",name:"account",type:"text",rules:"required",required:"",placeholder:"請輸入帳號",modelValue:a.account,"onUpdate:modelValue":l[1]||(l[1]=s=>a.account=s),disabled:!V.isNew},null,8,["modelValue","disabled"]),o(t,{as:"p",class:"invalid-feedback d-block mb-0",name:"account"})]),e("div",Ue,[Ie,o(_,{class:"form-control",id:"name",name:"name",type:"text",rules:"required",required:"",placeholder:"請輸入姓名",modelValue:a.name,"onUpdate:modelValue":l[2]||(l[2]=s=>a.name=s)},null,8,["modelValue"]),o(t,{as:"p",class:"invalid-feedback d-block mb-0",name:"name"})]),e("div",qe,[Me,o(_,{class:"form-control",id:"tel",name:"phone",type:"tel",required:"",rules:"required|digits:10|numeric",placeholder:"請輸入電話",modelValue:a.phone,"onUpdate:modelValue":l[3]||(l[3]=s=>a.phone=s),disabled:!V.isNew},null,8,["modelValue","disabled"]),o(t,{as:"p",class:"invalid-feedback d-block mb-0",name:"phone"})]),e("div",$e,[e("div",Be,[Pe,o(_,{id:"department",name:"department",as:"select",class:"form-select",required:"",rules:"required",modelValue:a.department,"onUpdate:modelValue":l[4]||(l[4]=s=>a.department=s)},{default:A(()=>[Qe,(n(!0),c(g,null,C(f.value,s=>(n(),c("option",{key:s,value:s},i(s),9,Se))),128))]),_:1},8,["modelValue"]),o(t,{as:"p",class:"invalid-feedback d-block mb-0",name:"department"})]),e("div",je,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:l[5]||(l[5]=s=>O("department"))}," 建立新單位 ")])]),e("div",Fe,[e("div",Oe,[ze,o(_,{id:"title",name:"title",as:"select",class:"form-select",required:"",rules:"required",modelValue:a.title,"onUpdate:modelValue":l[6]||(l[6]=s=>a.title=s)},{default:A(()=>[Ne,(n(!0),c(g,null,C(y.value,s=>(n(),c("option",{key:s,value:s},i(s),9,Ye))),128))]),_:1},8,["modelValue"]),o(t,{as:"p",class:"invalid-feedback d-block mb-0",name:"title"})]),e("div",Le,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:l[7]||(l[7]=s=>O("title"))}," 建立新職稱 ")])]),e("div",Xe,[Ze,o(_,{id:"system-access",name:"system-access",as:"select",class:"form-select",required:"",rules:"required",modelValue:a.systemAccess,"onUpdate:modelValue":l[8]||(l[8]=s=>a.systemAccess=s)},{default:A(()=>[Te,(n(!0),c(g,null,C(V.systemAccesss,s=>(n(),c("option",{key:s,value:s},i(r(s)),9,Ke))),128))]),_:1},8,["modelValue"]),o(t,{as:"p",class:"invalid-feedback d-block mb-0",name:"system-access"})])]),We,Re,(n(!0),c(g,null,C(m(v),(s,T)=>(n(),c("div",{key:s.key,class:"col-12 d-flex align-items-start gap-2 mb-3"},[e("div",De,[o(_,{id:`page-${T}`,name:`page-${T}`,as:"select",class:"form-select",required:"",rules:"required",modelValue:s.page,"onUpdate:modelValue":w=>s.page=w,disabled:s.page!==""},{default:A(()=>[He,(n(!0),c(g,null,C(m(P),w=>(n(),c("option",{key:w,value:w},i(w),9,Je))),128))]),_:2},1032,["id","name","modelValue","onUpdate:modelValue","disabled"]),o(t,{as:"p",class:"invalid-feedback d-block mb-0",name:`page-${T}`},null,8,["name"])]),e("div",Ge,[e("button",{type:"button",class:S(["btn btn-outline-gray dropdown-toggle",[s.access!==""?"text-black":""]]),"data-bs-toggle":"dropdown","aria-expanded":"false"},i(s.access!==""?u(s.access):"請選擇權限"),3),e("ul",es,[(n(!0),c(g,null,C(m($),w=>(n(),c("li",{key:w,class:"d-flex"},[e("img",{src:se,class:S([w===s.access?"visible":""]),alt:"tick"},null,2),e("a",{class:"dropdown-item",href:"#",onClick:H(Gs=>X(s,w),["prevent"])},i(u(w)),9,ss)]))),128)),e("li",ts,[os,e("a",{class:"dropdown-item text-danger border-0",href:"#",onClick:H(w=>F(s),["prevent"])},"移除權限",8,ls)])])])]))),128)),e("div",as,[e("button",{type:"button",class:S(["btn",{"btn-outline-gray":m(v)&&m(v)[m(v).length-1].page==="","btn-outline-primary":!(m(v)&&m(v)[m(v).length-1].page==="")}]),onClick:N,disabled:m(v)&&m(v)[m(v).length-1].page===""}," 新增頁面 ",10,ns)]),e("div",cs,[V.isNew?(n(),c("span",ds,[e("button",{class:S(["btn btn-primary w-50",[I.valid?"btn-primary":"btn-gray"]]),disabled:!I.valid,type:"button",onClick:l[9]||(l[9]=s=>Y())}," 下一步 ",10,is)])):(n(),c("span",rs,[e("button",{class:S(["btn btn-primary w-50",[I.valid?"btn-primary":"btn-gray"]]),disabled:!I.valid,type:"button",onClick:l[10]||(l[10]=s=>L())}," 儲存 ",10,us)]))])]),_:1},512)])]),o(te,{"temp-array":M.value,"array-name":p.value,onDataAdjusted:E},null,8,["temp-array","array-name"]),o(fe,{"user-object":a,"set-password-element":U.value,"account-edit-element":V.accountEditElement},null,8,["user-object","set-password-element","account-edit-element"])],64)}}},bs={class:"container"},ps={class:"list-unstyled d-flex page-box mb-4"},fs={class:"page-item"},vs={class:"page-item"},_s={class:"bg-white-box mb-2"},hs={class:"d-flex gap-2"},gs={class:""},ys=e("label",{for:"searchInput",class:"form-label"},"姓名、電話、帳號",-1),ks={class:""},ws=e("label",{for:"search-department",class:"form-label"},"單位",-1),As=e("option",{value:"",disabled:""},"請選擇單位",-1),Vs=["value"],Es={class:""},Cs=e("label",{for:"search-title",class:"form-label"},"職稱",-1),xs=e("option",{value:"",disabled:""},"請選擇職稱",-1),Us=["value"],Is=e("button",{type:"submit",class:"btn btn-gray fw-semibold"},"搜尋",-1),qs={class:"d-flex justify-content-between align-items-end mb-2"},Ms=e("h4",{class:"fw-semibold"},"列表",-1),$s={class:"d-flex gap-2 align-items-center me-2"},Bs={class:"mb-0 me-2"},Ps={class:"bg-white-box"},Qs={class:"table-responsive"},Ss={class:"table table-hover"},js=e("thead",{class:"table-head"},[e("tr",null,[e("th",{scope:"col"},"排序"),e("th",{class:"table-img-col",scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"頭像")]),e("th",{scope:"col"},"單位"),e("th",{scope:"col"},"單位"),e("th",{scope:"col"},"姓名"),e("th",{scope:"col"},"電話"),e("th",{scope:"col"},"帳號"),e("th",{scope:"col"},"系統權限"),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"權限頁面")]),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"操作")])])],-1),Fs={scope:"row",class:"text-center"},Os={class:"ps-2"},zs=["src"],Ns={class:"ps-2 mb-0"},Ys={class:"ps-2"},Ls=["onClick"],Xs=["onClick"],Zs={class:"modal fade",id:"delUserModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ts={class:"modal-dialog modal-dialog-centered"},Ks={class:"modal-content bg-white-box"},Ws=G('<div class="modal-header border-0"><div class="title-word"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">刪除帳號</h2></div><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>',1),Rs={class:"modal-body"},Ds={class:"fw-semibold"},Hs={class:"d-flex gap-2 justify-content-center"},Js=e("button",{type:"submit",class:"fw-semibold btn btn-outline-black w-50","data-bs-dismiss":"modal"}," 取消 ",-1),at={__name:"AccountMangerView",setup(V){const{userDatas:B,departments:b,titles:q,systemAccesss:M}=K,p=h(B),f=h(null),y=h(null),k=h(null),P=h(null),$=h(null),a=h(null),v=h(null);function N(r){console.log(r)}function Y(){v.value.resetForm()}function L(r){switch(r){case"Admin":return"系統管理員";case"editable":return"可編輯";case"onlyView":return"僅檢視";case"deactivate":return"停用中";default:return r}}function F(r,u){u==="new"?(y.value=!0,k.value={account:"",name:"",phone:"",department:"",title:"",systemAccess:"",pageAccess:[{page:"",access:""}]}):(y.value=!1,k.value={...r}),$.value.show()}function X(r){if(y.value){const u=p.value[p.value.length-1],E=u?parseInt(u.id,10):0,U=isNaN(E)?1:E+1;r.id=U,p.value.push(r)}else{const u=p.value.findIndex(E=>E.id===r.id);u!==-1&&(p.value[u]=r)}}function O(r){a.value.show(),f.value={...r}}function Z(r){p.value=p.value.filter((u,E)=>u.id!==r),f.value=null,a.value.hide(),z.fire({icon:"success",title:"已刪除",position:"top",showConfirmButton:!1,timer:2e3})}return ee(()=>{$.value=new J("#accountEditOffcanvas",{keyboard:!1}),P.value=new R(document.querySelector("#addModal"),{keyboard:!1}),a.value=new R(document.querySelector("#delUserModal"),{keyboard:!1})}),(r,u)=>{var _;const E=x("router-link"),U=x("VField"),d=x("ErrorMessage"),l=x("VForm");return n(),c(g,null,[e("div",bs,[e("ul",ps,[e("li",fs,[o(E,{to:"/access/accountManger",class:"page-link fs-4"},{default:A(()=>[j("帳號")]),_:1})]),e("li",vs,[o(E,{to:"/access/pageManger",class:"page-link fs-4"},{default:A(()=>[j("頁面")]),_:1})])]),e("section",_s,[o(l,{class:"d-flex justify-content-between align-items-end",ref_key:"searchForm",ref:v,onSubmit:N},{default:A(()=>[e("div",hs,[e("div",gs,[ys,o(U,{class:"form-control",name:"searchInput",type:"text",id:"searchInput",placeholder:"請輸入姓名、電話、帳號"})]),e("div",ks,[ws,o(U,{id:"search-department",name:"department",as:"select",class:"form-select"},{default:A(()=>[As,(n(!0),c(g,null,C(m(b),t=>(n(),c("option",{key:t,value:t},i(t),9,Vs))),128))]),_:1}),o(d,{as:"p",class:"invalid-feedback d-block mb-0",name:"department"})]),e("div",Es,[Cs,o(U,{id:"search-title",name:"title",as:"select",class:"form-select"},{default:A(()=>[xs,(n(!0),c(g,null,C(m(q),t=>(n(),c("option",{key:t,value:t},i(t),9,Us))),128))]),_:1}),o(d,{as:"p",class:"invalid-feedback d-block mb-0",name:"職稱"})])]),e("div",{class:"d-flex gap-2"},[e("button",{type:"button",class:"btn btn-outline-gray fw-semibold",onClick:Y}," 清除 "),Is])]),_:1},512)]),e("section",null,[e("div",qs,[Ms,e("div",$s,[e("p",Bs,"共計："+i(p.value.length)+" 筆",1),e("button",{class:"btn btn-outline-primary fw-semibold",type:"button","aria-controls":"staticBackdrop",onClick:u[0]||(u[0]=t=>F(k.value,"new"))}," 建立新帳號 ")])]),e("div",Ps,[e("div",Qs,[e("table",Ss,[js,(n(!0),c(g,null,C(p.value,(t,Q)=>(n(),c("tbody",{key:t.id},[e("tr",null,[e("th",Fs,i(Q+1),1),e("td",null,[e("div",Os,[e("img",{class:"table-img-head",src:t.photo,alt:""},null,8,zs)])]),e("td",null,i(t.department),1),e("td",null,i(t.title),1),e("td",null,i(t.name),1),e("td",null,i(t.phone),1),e("td",null,i(t.account),1),e("td",null,i(L(t.systemAccess)),1),e("td",null,[e("p",Ns,[(n(!0),c(g,null,C(t.pageAccess,(I,s)=>(n(),c(g,null,[j(i(s>0?"、":"")+i(I.page),1)],64))),256))])]),e("td",null,[e("div",Ys,[e("button",{type:"button",class:"btn btn-outline-primary border-0 fw-semibold","aria-controls":"staticBackdrop",onClick:I=>F(t,"edit")}," 編輯 ",8,Ls),e("button",{type:"button",class:"btn btn-outline-danger border-0 fw-semibold",onClick:I=>O(t)}," 刪除 ",8,Xs)])])])]))),128))])])])])]),e("div",Zs,[e("div",Ts,[e("div",Ks,[Ws,e("div",Rs,[e("p",null,[j(" 確定要刪除 "),e("span",Ds,i((_=f.value)==null?void 0:_.name),1),j(" 的帳號嗎？ ")]),e("div",Hs,[e("button",{type:"submit",class:"fw-semibold btn btn-danger w-50",onClick:u[1]||(u[1]=t=>{var Q;return Z((Q=f.value)==null?void 0:Q.id)})}," 確定刪除 "),Js])])])])]),o(ms,{titles:m(q),departments:m(b),"system-accesss":m(M),"is-new":y.value,"temp-object":k.value,"add-modal-element":P.value,"account-edit-element":$.value,onUpdateUserObject:X},null,8,["titles","departments","system-accesss","is-new","temp-object","add-modal-element","account-edit-element"])],64)}}};export{at as default};
