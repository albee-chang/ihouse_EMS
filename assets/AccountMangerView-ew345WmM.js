import{O as J,d as K,M as D}from"./bootstrap.esm-Rs7Aj1ey.js";import{a as _,b as W,r as E,o as a,d as n,e,f as o,w as A,g as G,h as R,i as ee,F as g,j as V,t as i,u,n as S,k as H,l as j}from"./index-B-KMzsvO.js";import{S as L}from"./sweetalert2.all-6XfT6ZgS.js";import{_ as se}from"./AddModal-5Kq3xjwd.js";const oe="data:image/png;base64,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",te="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.7452%204.42803L7.77354%2012.7079L4.24853%209.04665C3.73918%208.5176%202.92261%208.5176%202.41326%209.04665C1.90391%209.57569%201.90391%2010.4238%202.41326%2010.9529L6.85995%2015.5715C7.11058%2015.8318%207.44206%2015.9662%207.77354%2015.9662C8.10503%2015.9662%208.43651%2015.8318%208.69522%2015.5715L17.5805%206.33426C18.0899%205.80522%2018.0899%204.95707%2017.5805%204.42803C17.0793%203.89899%2016.2546%203.89899%2015.7452%204.42803Z'%20fill='white'/%3e%3cpath%20d='M7.7807%2016C7.42496%2016%207.0854%2015.8572%206.83477%2015.5969L2.38808%2010.9783C2.13744%2010.718%202%2010.3653%202%209.9958C2%209.62631%202.13744%209.27362%202.38808%209.0133C2.63871%208.75297%202.97827%208.61022%203.33401%208.61022C3.68974%208.61022%204.02931%208.75297%204.27994%209.0133L7.7807%2012.6494L15.7201%204.40308C15.9707%204.14276%2016.3103%204%2016.666%204C17.0217%204%2017.3613%204.14276%2017.6119%204.40308C17.8626%204.6634%2018%205.0161%2018%205.38558C18%205.75507%2017.8626%206.10777%2017.6119%206.36809L8.72663%2015.5969C8.476%2015.8572%208.14452%2016%207.7807%2016ZM3.34209%208.69419C3.00253%208.69419%202.68722%208.82855%202.45275%209.08048C2.21829%209.324%202.08085%209.6515%202.08085%2010.0042C2.08085%2010.3569%202.21021%2010.6844%202.45275%2010.9279L6.89944%2015.5465C7.13391%2015.7901%207.44922%2015.9328%207.78878%2015.9328C8.12835%2015.9328%208.44366%2015.7985%208.67812%2015.5465L17.5634%206.30091C17.7979%206.05738%2017.9353%205.72988%2017.9353%205.37719C17.9353%205.02449%2017.806%204.69699%2017.5634%204.45346C17.3209%204.20994%2017.0056%204.07558%2016.6741%204.07558C16.3426%204.07558%2016.0354%204.20994%2015.8009%204.44507L7.78878%2012.767L7.75644%2012.7334L4.23143%209.07208C3.98888%208.82855%203.67357%208.69419%203.34209%208.69419Z'%20fill='white'/%3e%3c/svg%3e",le={class:"offcanvas offcanvas-end account-offcanvas",tabindex:"-1","data-bs-backdrop":"static",id:"setPasswordCanvas","aria-labelledby":"accountEditOffcanvasLabel"},ae=G('<div class="offcanvas-header justify-content-end"><button type="button" class="btn-close rounded-5 bg-gray" data-bs-dismiss="offcanvas" aria-label="Close"></button></div><div class="title-word mt-1"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">設定密碼</h2></div>',2),ne={class:"offcanvas-body"},ce=e("div",null,null,-1),de={class:"row g-3"},ie={class:"col-8"},re=e("label",{for:"password",class:"form-label"},"密碼：",-1),ue={class:"col-8"},me=e("label",{for:"password-chcek",class:"form-label"},"確認密碼：",-1),be={class:"mt-5 text-center d-flex gap-2"},pe=["disabled"],fe={__name:"AccountSetPassword",props:["userObject","setPasswordElement","accountEditElement"],setup(C){const P=_(null),m=C,I=W(m.userObject);function M(){P.value.resetForm(),m.setPasswordElement.hide(),m.accountEditElement.hide(),L.fire({icon:"success",title:"已建立",position:"center",showConfirmButton:!1,timer:2e3})}return(b,p)=>{const y=E("VField"),k=E("ErrorMessage"),$=E("VForm");return a(),n("div",le,[ae,e("div",ne,[ce,o($,{ref_key:"setPasswordForm",ref:P,class:"needs-validation h-100 d-flex flex-column justify-content-between",novalidate:""},{default:A(({meta:q})=>[e("div",de,[e("div",ie,[re,o(y,{class:"form-control",id:"password",name:"password",type:"password",rules:"required",placeholder:"請輸入密碼"}),o(k,{as:"p",class:"invalid-feedback d-block mb-0",name:"password"})]),e("div",ue,[me,o(y,{class:"form-control",id:"password-chcek",name:"password-chcek",type:"password",rules:"confirmed:@password",placeholder:"請再次輸入密碼",modelValue:I.password,"onUpdate:modelValue":p[0]||(p[0]=c=>I.password=c)},null,8,["modelValue"]),o(k,{as:"p",class:"invalid-feedback d-block mb-0",name:"password-chcek"})])]),e("div",be,[e("button",{class:"btn btn-outline-gray text-black w-50",type:"button",onClick:p[1]||(p[1]=c=>M())}," 上一步 "),e("button",{class:"btn btn-primary w-50",disabled:!q.valid,type:"button",onClick:p[2]||(p[2]=c=>M(b.value))}," 完成 ",8,pe)])]),_:1},512)])])}}},ve={class:"offcanvas offcanvas-end account-offcanvas","data-bs-backdrop":"static",tabindex:"-1",id:"accountEditOffcanvas","aria-labelledby":"staticBackdropLabel"},he={class:"offcanvas-header"},_e={class:"offcanvas-title fw-semibold",id:"staticBackdropLabel"},ge={class:"title-word mt-1"},ye=e("span",{class:"colr-block"},null,-1),ke={key:0},we={key:1},Ae={class:"offcanvas-body"},Ce=e("div",null,[e("img",{src:oe,alt:"uploadPhoto"})],-1),Ve={class:"row g-3"},Ee={class:"col-8"},xe=e("label",{for:"account",class:"form-label"},"帳號：",-1),Ue={class:"col-8"},Ie=e("label",{for:"name",class:"form-label"},"姓名：",-1),Me={class:"col-8"},qe=e("label",{for:"tel",class:"form-label"},"電話：",-1),Be={class:"col-12 d-flex select-lable-aligin gap-2"},Pe={class:"col-8"},$e=e("label",{for:"department",class:"form-label"},"單位：",-1),Qe=e("option",{value:"",disabled:""},"請選擇單位",-1),Se=["value"],je={class:"col-4"},Fe={class:"col-12 d-flex select-lable-aligin gap-2"},Oe={class:"col-8"},Le=e("label",{for:"title",class:"form-label"},"職稱：",-1),ze=e("option",{value:"",disabled:""},"請選擇職稱",-1),Ye=["value"],Ne={class:"col-4"},Ze={class:"col-8"},Xe=e("label",{for:"system-access",class:"form-label"},"系統權限：",-1),Te=e("option",{value:"",disabled:""},"請選擇權限",-1),Ke=["value"],We=e("hr",{class:"my-4"},null,-1),De=e("h3",null,"頁面權限",-1),Re={class:"col-8"},He=e("option",{value:"",disabled:""},"請選擇頁面",-1),Je=["value"],Ge={class:"col-4"},et={class:"dropdown-menu access-box"},tt=["onClick"],st={class:"d-flex"},ot=e("img",{src:te,alt:"tick"},null,-1),lt=["onClick"],at={class:"col-4"},nt=["disabled"],ct={class:"mt-5 text-center"},dt={key:0},it=["disabled"],rt={key:1},ut=["disabled"],mt={__name:"AccountEditOffcanvas",props:["departments","titles","systemAccesss","addModalElement","accountEditElement","isNew","tempObject"],emits:["updateUserObject"],setup(C,{emit:P}){const m=C,I=P,M=_(null),b=_(null),p=_(m.departments),y=_(m.titles),k=_(null),$=K.webPages,q=K.pageAccesss,c=W({id:"",account:"",name:"",phone:"",department:"",title:"",systemAccess:"",pageAccess:[{page:"",access:""}]});let f=W([{page:"",access:""}]);R(()=>m.tempObject,d=>{d!==null&&(Object.assign(c,d),f=d.pageAccess)},{immediate:!0}),R(()=>m.isNew,d=>{d&&k.value.resetForm()});function z(){f.push({page:"",access:""})}function Y(){I("updateUserObject",c),k.value.resetForm(),B.value.show()}function N(){I("updateUserObject",c),L.fire({icon:"success",title:"已儲存",position:"top",showConfirmButton:!1,timer:2e3}),m.accountEditElement.hide()}function F(d){L.fire({icon:"success",title:"已移除",position:"top",showConfirmButton:!1,timer:2e3})}function Z(d,l){const h=c.pageAccess.findIndex(s=>s.page===d.page);c.pageAccess[h].access=l}function O(d){m.addModalElement.show(),d==="title"?(b.value="title",M.value=[...y.value]):(b.value="department",M.value=[...p.value])}function X(){m.accountEditElement.hide()}function r(d){switch(d){case"Admin":return"系統管理員";case"editable":return"可編輯";case"onlyView":return"僅檢視";case"deactivate":return"停用中";default:return d}}function v(d){switch(d){case"editable":return"編輯者";case"onlyView":return"檢視者";case"del":return"移除權限";default:return d}}function x(d){const{arrayName:l,adjustedArray:h}=d;switch(l){case"title":y.value=h;break;case"department":p.value=h;break;default:console.error(d);break}m.addModalElement.hide()}const B=_(null);return ee(()=>{B.value=new J(document.querySelector("#setPasswordCanvas"),{keyboard:!1})}),(d,l)=>{const h=E("VField"),s=E("ErrorMessage"),Q=E("VForm");return a(),n(g,null,[e("div",ve,[e("div",he,[e("h2",_e,[e("div",ge,[ye,C.isNew?(a(),n("span",ke,"建立新帳號")):(a(),n("span",we,"編輯帳號"))])]),e("button",{type:"button",class:"btn-close rounded-5 bg-gray","aria-label":"Close",onClick:l[0]||(l[0]=U=>X())})]),e("div",Ae,[Ce,o(Q,{ref_key:"editUserForm",ref:k,class:"needs-validation"},{default:A(({meta:U})=>[e("div",Ve,[e("div",Ee,[xe,o(h,{class:"form-control",id:"account",name:"account",type:"text",rules:"required",required:"",placeholder:"請輸入帳號",modelValue:c.account,"onUpdate:modelValue":l[1]||(l[1]=t=>c.account=t),disabled:!C.isNew},null,8,["modelValue","disabled"]),o(s,{as:"p",class:"invalid-feedback d-block mb-0",name:"account"})]),e("div",Ue,[Ie,o(h,{class:"form-control",id:"name",name:"name",type:"text",rules:"required",required:"",placeholder:"請輸入姓名",modelValue:c.name,"onUpdate:modelValue":l[2]||(l[2]=t=>c.name=t)},null,8,["modelValue"]),o(s,{as:"p",class:"invalid-feedback d-block mb-0",name:"name"})]),e("div",Me,[qe,o(h,{class:"form-control",id:"tel",name:"phone",type:"tel",required:"",rules:"required|digits:10|numeric",placeholder:"請輸入電話",modelValue:c.phone,"onUpdate:modelValue":l[3]||(l[3]=t=>c.phone=t),disabled:!C.isNew},null,8,["modelValue","disabled"]),o(s,{as:"p",class:"invalid-feedback d-block mb-0",name:"phone"})]),e("div",Be,[e("div",Pe,[$e,o(h,{id:"department",name:"department",as:"select",class:"form-select",required:"",rules:"required",modelValue:c.department,"onUpdate:modelValue":l[4]||(l[4]=t=>c.department=t)},{default:A(()=>[Qe,(a(!0),n(g,null,V(p.value,t=>(a(),n("option",{key:t,value:t},i(t),9,Se))),128))]),_:1},8,["modelValue"]),o(s,{as:"p",class:"invalid-feedback d-block mb-0",name:"department"})]),e("div",je,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:l[5]||(l[5]=t=>O("department"))}," 建立新單位 ")])]),e("div",Fe,[e("div",Oe,[Le,o(h,{id:"title",name:"title",as:"select",class:"form-select",required:"",rules:"required",modelValue:c.title,"onUpdate:modelValue":l[6]||(l[6]=t=>c.title=t)},{default:A(()=>[ze,(a(!0),n(g,null,V(y.value,t=>(a(),n("option",{key:t,value:t},i(t),9,Ye))),128))]),_:1},8,["modelValue"]),o(s,{as:"p",class:"invalid-feedback d-block mb-0",name:"title"})]),e("div",Ne,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:l[7]||(l[7]=t=>O("title"))}," 建立新職稱 ")])]),e("div",Ze,[Xe,o(h,{id:"system-access",name:"system-access",as:"select",class:"form-select",required:"",rules:"required",modelValue:c.systemAccess,"onUpdate:modelValue":l[8]||(l[8]=t=>c.systemAccess=t)},{default:A(()=>[Te,(a(!0),n(g,null,V(C.systemAccesss,t=>(a(),n("option",{key:t,value:t},i(r(t)),9,Ke))),128))]),_:1},8,["modelValue"]),o(s,{as:"p",class:"invalid-feedback d-block mb-0",name:"system-access"})])]),We,De,(a(!0),n(g,null,V(u(f),(t,T)=>(a(),n("div",{key:t.key,class:"col-12 d-flex align-items-start gap-2 mb-3"},[e("div",Re,[o(h,{id:`page-${T}`,name:`page-${T}`,as:"select",class:"form-select",required:"",rules:"required",modelValue:t.page,"onUpdate:modelValue":w=>t.page=w,disabled:t.page!==""},{default:A(()=>[He,(a(!0),n(g,null,V(u($),w=>(a(),n("option",{key:w,value:w},i(w),9,Je))),128))]),_:2},1032,["id","name","modelValue","onUpdate:modelValue","disabled"]),o(s,{as:"p",class:"invalid-feedback d-block mb-0",name:`page-${T}`},null,8,["name"])]),e("div",Ge,[e("button",{type:"button",class:S(["btn btn-outline-gray dropdown-toggle",[t.access!==""?"text-black":""]]),"data-bs-toggle":"dropdown","aria-expanded":"false"},i(t.access!==""?v(t.access):"請選擇權限"),3),e("ul",et,[(a(!0),n(g,null,V(u(q),w=>(a(),n("li",{key:w,class:"d-flex"},[e("img",{src:te,class:S([w===t.access?"visible":""]),alt:"tick"},null,2),e("a",{class:"dropdown-item",href:"#",onClick:H(Gt=>Z(t,w),["prevent"])},i(v(w)),9,tt)]))),128)),e("li",st,[ot,e("a",{class:"dropdown-item text-danger border-0",href:"#",onClick:H(w=>F(t),["prevent"])},"移除權限",8,lt)])])])]))),128)),e("div",at,[e("button",{type:"button",class:S(["btn",{"btn-outline-gray":u(f)&&u(f)[u(f).length-1].page==="","btn-outline-primary":!(u(f)&&u(f)[u(f).length-1].page==="")}]),onClick:z,disabled:u(f)&&u(f)[u(f).length-1].page===""}," 新增頁面 ",10,nt)]),e("div",ct,[C.isNew?(a(),n("span",dt,[e("button",{class:S(["btn btn-primary w-50",[U.valid?"btn-primary":"btn-gray"]]),disabled:!U.valid,type:"button",onClick:l[9]||(l[9]=t=>Y())}," 下一步 ",10,it)])):(a(),n("span",rt,[e("button",{class:S(["btn btn-primary w-50",[U.valid?"btn-primary":"btn-gray"]]),disabled:!U.valid,type:"button",onClick:l[10]||(l[10]=t=>N())}," 儲存 ",10,ut)]))])]),_:1},512)])]),o(se,{"temp-array":M.value,"array-name":b.value,onDataAdjusted:x},null,8,["temp-array","array-name"]),o(fe,{"user-object":c,"set-password-element":B.value,"account-edit-element":C.accountEditElement},null,8,["user-object","set-password-element","account-edit-element"])],64)}}},bt={class:"container"},pt={class:"list-unstyled d-flex page-box mb-4"},ft={class:"page-item"},vt={class:"page-item"},ht={class:"bg-white-box mb-2"},_t={class:"d-flex gap-2"},gt={class:""},yt=e("label",{for:"searchInput",class:"form-label"},"姓名、電話、帳號",-1),kt={class:""},wt=e("label",{for:"search-department",class:"form-label"},"單位",-1),At=e("option",{value:"",disabled:""},"請選擇單位",-1),Ct=["value"],Vt={class:""},Et=e("label",{for:"search-title",class:"form-label"},"職稱",-1),xt=e("option",{value:"",disabled:""},"請選擇職稱",-1),Ut=["value"],It=e("button",{type:"submit",class:"btn btn-gray fw-semibold"},"搜尋",-1),Mt={class:"d-flex justify-content-between align-items-end mb-2"},qt=e("h4",{class:"fw-semibold"},"列表",-1),Bt={class:"d-flex gap-2 align-items-center me-2"},Pt={class:"mb-0 me-2"},$t={class:"bg-white-box"},Qt={class:"table-responsive"},St={class:"table table-hover"},jt=e("thead",{class:"table-head"},[e("tr",null,[e("th",{scope:"col"},"排序"),e("th",{class:"table-img-col",scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"頭像")]),e("th",{scope:"col"},"單位"),e("th",{scope:"col"},"單位"),e("th",{scope:"col"},"姓名"),e("th",{scope:"col"},"電話"),e("th",{scope:"col"},"帳號"),e("th",{scope:"col"},"系統權限"),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"權限頁面")]),e("th",{scope:"col"},[e("p",{class:"border-start border-2 ps-2 mb-0"},"操作")])])],-1),Ft={scope:"row",class:"text-center"},Ot={class:"ps-2"},Lt=["src"],zt={class:"ps-2 mb-0"},Yt={class:"ps-2"},Nt=["onClick"],Zt=["onClick"],Xt={class:"modal fade",id:"delUserModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Tt={class:"modal-dialog modal-dialog-centered"},Kt={class:"modal-content bg-white-box"},Wt=G('<div class="modal-header border-0"><div class="title-word"><span class="colr-block"></span><h2 class="mb-0 fw-semibold">刪除帳號</h2></div><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div>',1),Dt={class:"modal-body"},Rt={class:"fw-semibold"},Ht={class:"d-flex gap-2 justify-content-center"},Jt=e("button",{type:"submit",class:"fw-semibold btn btn-outline-black w-50","data-bs-dismiss":"modal"}," 取消 ",-1),ls={__name:"AccountMangerView",setup(C){const{userDatas:P,departments:m,titles:I,systemAccesss:M}=K,b=_(P),p=_(null),y=_(null),k=_(null),$=_(null),q=_(null),c=_(null),f=_(null);function z(r){console.log(r)}function Y(){f.value.resetForm()}function N(r){switch(r){case"Admin":return"系統管理員";case"editable":return"可編輯";case"onlyView":return"僅檢視";case"deactivate":return"停用中";default:return r}}function F(r,v){v==="new"?(y.value=!0,k.value={account:"",name:"",phone:"",department:"",title:"",systemAccess:"",pageAccess:[{page:"",access:""}]}):(y.value=!1,k.value={...r}),q.value.show()}function Z(r){if(y.value){const x=b[b.value.length-1].id+1;r.id=x,b.value.push(r)}else{const v=b.value.findIndex(x=>x.id===r.id);v!==-1&&(b.value[v]=r)}}function O(r){c.value.show(),p.value={...r}}function X(r){b.value=b.value.filter((v,x)=>v.id!==r),p.value=null,c.value.hide(),L.fire({icon:"success",title:"已刪除",position:"top",showConfirmButton:!1,timer:2e3})}return ee(()=>{q.value=new J("#accountEditOffcanvas",{keyboard:!1}),$.value=new D(document.querySelector("#addModal"),{keyboard:!1}),c.value=new D(document.querySelector("#delUserModal"),{keyboard:!1})}),(r,v)=>{var h;const x=E("router-link"),B=E("VField"),d=E("ErrorMessage"),l=E("VForm");return a(),n(g,null,[e("div",bt,[e("ul",pt,[e("li",ft,[o(x,{to:"/access/accountManger",class:"page-link fs-4"},{default:A(()=>[j("帳號")]),_:1})]),e("li",vt,[o(x,{to:"/access/pageManger",class:"page-link fs-4"},{default:A(()=>[j("頁面")]),_:1})])]),e("section",ht,[o(l,{class:"d-flex justify-content-between align-items-end",ref_key:"searchForm",ref:f,onSubmit:z},{default:A(()=>[e("div",_t,[e("div",gt,[yt,o(B,{class:"form-control",name:"searchInput",type:"text",id:"searchInput",placeholder:"請輸入姓名、電話、帳號"})]),e("div",kt,[wt,o(B,{id:"search-department",name:"department",as:"select",class:"form-select"},{default:A(()=>[At,(a(!0),n(g,null,V(u(m),s=>(a(),n("option",{key:s,value:s},i(s),9,Ct))),128))]),_:1}),o(d,{as:"p",class:"invalid-feedback d-block mb-0",name:"department"})]),e("div",Vt,[Et,o(B,{id:"search-title",name:"title",as:"select",class:"form-select"},{default:A(()=>[xt,(a(!0),n(g,null,V(u(I),s=>(a(),n("option",{key:s,value:s},i(s),9,Ut))),128))]),_:1}),o(d,{as:"p",class:"invalid-feedback d-block mb-0",name:"職稱"})])]),e("div",{class:"d-flex gap-2"},[e("button",{type:"button",class:"btn btn-outline-gray fw-semibold",onClick:Y}," 清除 "),It])]),_:1},512)]),e("section",null,[e("div",Mt,[qt,e("div",Bt,[e("p",Pt,"共計："+i(b.value.length)+" 筆",1),e("button",{class:"btn btn-outline-primary fw-semibold",type:"button","aria-controls":"staticBackdrop",onClick:v[0]||(v[0]=s=>F(k.value,"new"))}," 建立新帳號 ")])]),e("div",$t,[e("div",Qt,[e("table",St,[jt,(a(!0),n(g,null,V(b.value,(s,Q)=>(a(),n("tbody",{key:s.id},[e("tr",null,[e("th",Ft,i(Q+1),1),e("td",null,[e("div",Ot,[e("img",{class:"table-img-head",src:s.photo,alt:""},null,8,Lt)])]),e("td",null,i(s.department),1),e("td",null,i(s.title),1),e("td",null,i(s.name),1),e("td",null,i(s.phone),1),e("td",null,i(s.account),1),e("td",null,i(N(s.systemAccess)),1),e("td",null,[e("p",zt,[(a(!0),n(g,null,V(s.pageAccess,(U,t)=>(a(),n(g,null,[j(i(t>0?"、":"")+i(U.page),1)],64))),256))])]),e("td",null,[e("div",Yt,[e("button",{type:"button",class:"btn btn-outline-primary border-0 fw-semibold","aria-controls":"staticBackdrop",onClick:U=>F(s,"edit")}," 編輯 ",8,Nt),e("button",{type:"button",class:"btn btn-outline-danger border-0 fw-semibold",onClick:U=>O(s)}," 刪除 ",8,Zt)])])])]))),128))])])])])]),e("div",Xt,[e("div",Tt,[e("div",Kt,[Wt,e("div",Dt,[e("p",null,[j(" 確定要刪除 "),e("span",Rt,i((h=p.value)==null?void 0:h.name),1),j(" 的帳號嗎？ ")]),e("div",Ht,[e("button",{type:"submit",class:"fw-semibold btn btn-danger w-50",onClick:v[1]||(v[1]=s=>{var Q;return X((Q=p.value)==null?void 0:Q.id)})}," 確定刪除 "),Jt])])])])]),o(mt,{titles:u(I),departments:u(m),"system-accesss":u(M),"is-new":y.value,"temp-object":k.value,"add-modal-element":$.value,"account-edit-element":q.value,onUpdateUserObject:Z},null,8,["titles","departments","system-accesss","is-new","temp-object","add-modal-element","account-edit-element"])],64)}}};export{ls as default};
